<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="mystyle.css">
  <meta charset="UTF-8">
  <title>Scam Checker</title>
</head>
<body>
  <h1>ScamOrReal.ai</h1>
  <p>The purpose of this tool is to assist you in identifying whether something that you have received is a scam or if it a real correspondence.</p>
  <p>Paste suspicious text or upload a screenshot. Please ensure that if your input is a text or email, it includes the sender's number/address. Please also ensure that if it is a website, you include the URL.</p>

  <textarea id="userInput" placeholder="Paste text here..."></textarea>
  <input type="file" id="imageInput" accept="image/*">
  <button onclick="checkScam()">Check</button>

  <div class="response" id="response"></div>

  <script>
    async function checkScam() {
      const input = document.getElementById("userInput").value;
      const fileInput = document.getElementById("imageInput").files[0];
      const resDiv = document.getElementById("response");
      resDiv.textContent = "Checking...";

      let imageUrl = null;

      if (fileInput) {
        // Convert to base64
        const base64 = await toBase64(fileInput);
        imageUrl = `data:${fileInput.type};base64,${base64}`;
      }

      const response = await fetch("https://scam-checker.yourname.workers.dev", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ user_input: input, image_url: imageUrl })
      });

      const data = await response.json();
      resDiv.textContent = data.reply;
    }

    function toBase64(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => {
          // strip "data:image/png;base64," prefix
          resolve(reader.result.split(",")[1]);
        };
        reader.onerror = error => reject(error);
      });
    }
  </script>
</bo
